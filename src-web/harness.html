<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <title>Marketboard Analysis</title>

    <script type="module" src="./js/util.js"></script>
    <script type="module" src="./js/tables.js"></script>
    <!-- <script src="./crafts.js"></script> -->
    <script type="module" src="./js/custom.js"></script>
    <script type="module" src="./js/headers.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/lodash.js/4.17.21/lodash.min.js" integrity="sha512-WFN04846sdKMIP5LKNphMaWzU7YpMyCU245etK3g/2ARYbPK9Ub18eG+ljU96qKRCWh+quCY7yefSmlkQw1ANQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>

    <link rel="stylesheet/less" type="text/css" href="harness.less" />
    <script src="less.min.js" type="text/javascript"></script>
</head>

<body class="overflow-hidden">
    <div class="content-container">
        <div class="header max-width">
            <div>Crafts</div>
            <div>Custom</div>
            <div selected>Exchange</div>
        </div>
        <div class="craft-container collapsed">
            <div id="craft-group-list"></div>
            <div class="craft-group-info">
                <div class="craft-filters">
                    <div class="filter">
                        <label>Min Profit:</label>
                        <input id="craft-min-profit" type="number" value="0">
                    </div>
                    <div class="filter">
                        <label>Min Velocity:</label>
                        <input id="craft-min-velocity" type="number" value="3.0">
                    </div>
                </div>
                <div id="craft-table-div" class="craft-table table-scroll"></div>
                <div id="craft-info-div">Testing!</div>
            </div>
        </div>
        <div class="container-custom max-width collapsed">
            <div class="custom-filters">
                <label>Filters:</label>
                <div>
                    <div>
                        <input id="custom-filters" type="text"
                            value=":count 100, :name Grade 4 Skybuilders' Spinning Wheel">
                    </div>
                    <div>
                        <select id="custom-filters-list">
                            <option value=":name Item Name, :count 1, :rlevel 1|90">&lt;New&gt;</option>
                            <option value=":count 1, :rlevel 90, :cat Metal|Lumber|Leather|Stone|Cloth|Reagent">Level 90 Crafting Mats</option>
                            <option value=":limit 16, :min_velocity 50.0, :count 1, :rlevel 1|90, :cat Metal|Lumber|Leather|Stone|Cloth|Reagent">Quick Mats</option>
                            <option value=":limit 16, :min_velocity 10.0, :cat Ceiling Light|Door|Flooring|Furnishing|Interior Wall|Placard|Rug|Table|Tabletop|Window|Exterior Wall|Exterior Wall Decoration|Fence|Outdoor Furnishing|Roof|Roof Decoration|Wall-mounted">Popular Housing</option>
                            <option value=":limit 16, :min_velocity 1.0, :rlevel 1|90, :ilevel 1, :cat Head|Body|Hands|Legs|Feet">Cosmetics</option>
                            <option value=":count 100, :rlevel 80, :name Grade 4 Skybuilders'">Skybuilders' Crafts</option>
                        </select>
                        <button id="custom-filters-load">Load</button>
                        <button id="custom-filters-save">Save</button>
                        <button id="custom-filters-save-as">Save As</button>
                        <button id="custom-filters-delete">Delete</button>
                    </div>
                </div>
                <button id="custom-filters-refresh" type="button">Refresh</button>
            </div>
            <div class="recipe-info max-width">
                <div id="custom-table-div" class="table-scroll max-width">
                    <table id="custom-table-cur">
                        <thead>
                            <tr>
                                <th>â˜‘</th>
                                <th>Name</th>
                                <th>Sell</th>
                                <th>Buy</th>
                                <th>Craft</th>
                                <th>Profit</th>
                            </tr>
                        </thead>
                        <tbody></tbody>
                    </table>
                </div>
            </div>
            <div class="recipe-world-info max-width">
                <div id="custom-world-div" class="table-scroll max-width">
                    <div id="custom-world-cur"></div>
                </div>
            </div>
        </div>
        <div class="container-exchange max-width">
            <div class="max-width">
                <button id="exchange-refresh">Refresh</button>
                <label id="exchange-refresh-status"></label>
            </div>
            <div class="exchange-cur-parent table-scroll max-width">
                <div id="exchange-cur">
                </div>
            </div>
        </div>
    </div>

    <script type="module">
        console.log('Inside scripts');
        import Custom from "./js/custom.js";
        import Exchange from "./js/exchange.js";
        import Headers from "./js/headers.js";
        import Util from "./js/util.js";

        window.onload = _ => {
            console.log('Inside onload');
            setTimeout(() => Util.fixFlexOverflow(), 500);

            // craftInfo.setupEvents();
            Custom.setupEvents();
            Exchange.setupEvents();
            Headers.setupEvents();

            // craftInfo.fetchData().then(() => {
            //     craftInfo.createTables();
            // });
        }
    </script>
</body>

</html>